name: Build BlissRoms-x86

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    name: Compile BlissRoms-x86
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Set Up Dependencies
        run: |
          sudo apt-get update
          sudo apt-get install -y git-core git-lfs gnupg flex bison maven gperf build-essential \
            zip curl zlib1g-dev gcc-multilib g++-multilib libc6-dev-i386 lib32ncurses5-dev \
            x11proto-core-dev libx11-dev lib32z-dev ccache libgl1-mesa-dev libxml2-utils \
            xsltproc unzip squashfs-tools python-mako libssl-dev ninja-build lunzip syslinux \
            syslinux-utils gettext genisoimage bc xorriso libncurses5 xmlstarlet \
            imagemagick lib32readline-dev liblz4-tool libsdl1.2-dev libxml2 lzop pngcrush \
            rsync schedtool python-enum34 python3-mako libelf-dev aapt zstd rdfind nasm rustc bindgen
          sudo apt-get install -y gcc-10 g++-10  # If NO_KERNEL_CROSS_COMPILE is set

      - name: Initialize Repo
        run: |
          git config --global user.name "Your Name"
          git config --global user.email "your.email@example.com"
          repo init -u https://github.com/BlissRoms-x86/manifest.git -b main
